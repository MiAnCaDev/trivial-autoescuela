<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Test Autoescuela</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

body{
    margin:0;
    font-family: Arial, Helvetica, sans-serif;
    background:#f4f6f9;
}

/* HEADER */
header{
    background:#39b061;
    color:white;
    padding:15px 30px;
    display:flex;
    align-items:center;
    justify-content:space-between;
}

.logo{
    font-size:22px;
    font-weight:bold;
}

nav a{
    color:white;
    text-decoration:none;
    margin-left:20px;
    font-size:14px;
}

/* QUIZ CARD */
.container{
    max-width:800px;
    margin:40px auto;
    padding:20px;
}

.card{
    background:white;
    padding:30px;
    border-radius:10px;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
}

h2{
    color:#1e3a8a;
}

button{
    width:100%;
    padding:12px;
    margin:8px 0;
    border:none;
    border-radius:6px;
    font-size:16px;
    cursor:pointer;
    background:#39b061;
    color:white;
    transition:0.3s;
}

button:hover{
    background:#2b894b;
}

.progress{
    margin-top:15px;
    font-size:14px;
    color:#555;
}

.result{
    text-align:center;
    font-size:22px;
    color:#1e3a8a;
}

.logo img{
    width: 7.5vw;
}

</style>
</head>

<body>

<header>
    <div class="logo"><img src="https://www.tuteoricoporlibre.com/wp-content/uploads/2021/03/logorec.png"/></div>
    <nav>
        <a href="https://www.tuteoricoporlibre.com/">Inicio</a>
    </nav>
</header>

<div class="container">
    <div class="card" id="quiz">
        <h2>Test Seguridad Vial</h2>
        <p id="question"></p>
        <div id="answers"></div>
        <div class="progress" id="progress"></div>
    </div>
</div>

<script>

let questions = [];
let current = 0;
let score = 0;

fetch("preguntas.json")
.then(res => res.json())
.then(data => {
    questions = data.sort(()=>Math.random()-0.5).slice(0,30);
    loadQuestion();
});

function loadQuestion(){
    const q = questions[current];
    document.getElementById("question").innerText = q.question;
    document.getElementById("progress").innerText =
        "Pregunta " + (current+1) + " de " + questions.length;

    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML="";

    q.answers.forEach((ans,i)=>{
        let btn = document.createElement("button");
        btn.innerText = ans;
        btn.onclick = ()=>checkAnswer(i);
        answersDiv.appendChild(btn);
    });
}

function checkAnswer(i){

    const buttons = document.querySelectorAll("#answers button");

    buttons.forEach((btn,index)=>{
        if(index === questions[current].correct){
            btn.style.background = "#16a34a"; // verde correcto
        } else {
            btn.style.background = "#dc2626"; // rojo incorrecto
        }
        btn.disabled = true;
    });

    if(i === questions[current].correct){
        score++;
    }

    setTimeout(()=>{
        current++;

        if(current >= questions.length){
            document.getElementById("quiz").innerHTML =
                "<div class='result'>Resultado final: "+score+"/"+questions.length+"</div>";
        } else {
            loadQuestion();
        }
    },1000);
}

</script>

</body>
</html>
