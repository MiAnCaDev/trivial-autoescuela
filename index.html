<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Trivial Autoescuela</title>
<style>
body { font-family: Arial; text-align:center; background:#f2f2f2; }
#quiz { background:white; padding:20px; margin:40px auto; width:90%; max-width:700px; border-radius:10px; }
button { display:block; margin:10px auto; padding:10px; width:80%; }
</style>
</head>
<body>

<div id="quiz">
<h2>ðŸš— Trivial Seguridad Vial</h2>
<p id="question"></p>
<div id="answers"></div>
<p id="progress"></p>
<p id="score"></p>
</div>

<script>

let questions = [];
let current = 0;
let score = 0;

fetch("preguntas.json")
.then(res => res.json())
.then(data => {
    questions = shuffle(data).slice(0, 20); // 20 por partida
    loadQuestion();
});

function shuffle(array){
    return array.sort(()=>Math.random()-0.5);
}

function loadQuestion(){
    const q = questions[current];
    document.getElementById("question").innerText = q.question;
    document.getElementById("progress").innerText = 
        "Pregunta " + (current+1) + " de " + questions.length;

    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML="";

    q.answers.forEach((ans,i)=>{
        let btn = document.createElement("button");
        btn.innerText = ans;
        btn.onclick = ()=>checkAnswer(i);
        answersDiv.appendChild(btn);
    });
}

function checkAnswer(i){
    if(i === questions[current].correct){
        score++;
        alert("âœ… Correcto");
    } else {
        alert("âŒ Incorrecto");
    }

    current++;
    if(current >= questions.length){
        document.getElementById("quiz").innerHTML =
            "<h2>Resultado final: "+score+"/"+questions.length+"</h2>";
    } else {
        loadQuestion();
    }
}

</script>
</body>
</html>
